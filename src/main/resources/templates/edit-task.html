<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Edit Task</title>

    <!-- External CSS -->
    <link rel="stylesheet" th:href="@{/css/edit-task.css}">
</head>
<body>

<!-- ===== Header ===== -->
<header class="app-header">
    <div class="header-container">
        <h1>Task Reminder Application</h1>

        <a th:href="@{/api/tasks}" class="header-btn">
            Task List
        </a>
    </div>
</header>

<!-- ===== Page Wrapper ===== -->
<div class="page-wrapper">

    <div class="card">

        <h2>Edit Task</h2>

        <!-- Error Message -->
        <div th:if="${errorMessage}" class="error-box">
            <p th:text="${errorMessage}"></p>
        </div>

        <!-- Form -->
        <form th:action="@{/api/tasks/edit/{id}(id=${task.id})}"
              th:object="${task}"
              method="post">

            <label>Title <span class="required">*</span></label>
            <input type="text"
                   th:field="*{title}"
                   required
                   minlength="3"
                   maxlength="100"/>

            <label>Description</label>
            <textarea th:field="*{description}"
                      maxlength="200"></textarea>

            <label>Due Date <span class="required">*</span></label>
            <input type="date"
                   th:field="*{dueDate}"
                   required/>

            <label>Status</label>
            <select th:field="*{status}">
                <option value="">-- Select Status --</option>
                <option th:each="s : ${T(com.tracker.app.enums.TaskStatus).values()}"
                        th:value="${s}"
                        th:text="${#strings.capitalize(#strings.replace(s.name().toLowerCase(),'_',' '))}">
                </option>
            </select>

            <label>Priority</label>
            <select th:field="*{priority}">
                <option value="">-- Select Priority --</option>
                <option th:each="p : ${T(com.tracker.app.enums.TaskPriority).values()}"
                        th:value="${p}"
                        th:text="${#strings.capitalize(p.name().toLowerCase())}">
                </option>
            </select>

            <!-- Buttons -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">
                    Save Changes
                </button>

                <a th:href="@{/api/tasks}" class="btn btn-secondary">
                    Cancel
                </a>
            </div>

        </form>
    </div>
</div>

<!-- ===== Footer ===== -->
<footer class="footer">
    © 2025 Task Reminder Application — Created by <strong>Santhosh</strong>
</footer>

</body>
</html>